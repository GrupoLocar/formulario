<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grupo Locar - Atualiza√ß√£o de Dados</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body style="    background-color: rgb(21, 71, 221);">
    <div style="background-color: rgb(21, 221, 38);" class="container">
        <h1 class="titulo">Grupo Locar</h1>
        <img class="logo" src="Logotipo.png" alt="Logotipo Grupo Locar" />
        <h1>Atualiza√ß√£o de Dados Cadastrais Obrigat√≥ria</h1>
        <br />
        <p>Prezados(as) colaboradores(as),</p>
        <br />
        <p>
            <strong>Por gentileza, solicitamos que todos preencham o formul√°rio de
                atualiza√ß√£o de dados at√© 30/06/2025.</strong>
        </p>
        <br />
        <p>
            Pedimos que todos os campos sejam preenchidos com aten√ß√£o e veracidade. As
            informa√ß√µes fornecidas ser√£o tratadas com total sigilo e utilizadas exclusivamente para fins
            administrativos.
            <span style="color: red;">Caso n√£o possua todos os dados solicitados, preencha o campo correspondente com
                zeros.</span>
        </p>
        <p>Contamos com a colabora√ß√£o de todos!</p>
        <p>
            Atenciosamente,<br />
            Karen Monnerat<br />
            Recursos Humanos<br />
            Grupo Locar
        </p>
        <hr />
        <h2 style="margin-top: 30px">Formul√°rio de Atualiza√ß√£o</h2>
        <form id="formFuncionario">
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <label style="display: inline-block; width: 80px;">Nome Completo: </label>
                <input type="text" name="nome" maxlength="100" required placeholder="nome completo"
                    style="margin-left: 10px; width: 400px;" />
            </div>
            <div>
                <label class="telefone">Telefone: </label>
                <input type="text" name="telefone" maxlength="15" required placeholder="telefone"
                    style="margin-left: 16px; width: 100px;" oninput="mascaraTelefone(this)" />
            </div>

            <!-- Campos ocultos para valores padr√£o -->
            <input type="hidden" name="situacao" value="Aprovar" />
            <input type="hidden" name="contrato" value="Verificar" />

            <h3>üìå Documentos Obrigat√≥rios</h3>

            <div>
                <label>CNH (PDF ou imagem): Por favor envie o documento e preencha os campos abaixo.</label>
                <div class="custom-file-upload">
                    <input type="file" id="cnhArquivo" name="cnhArquivo" accept=".pdf,image/*" style="display: none" />
                    <button type="button" onclick="document.getElementById('cnhArquivo').click()">Selecionar
                        Arquivo</button>
                    <span id="nomeArquivoCNH">Nenhum arquivo escolhido</span>
                </div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <label>CNH: </label>
                <input class="cnh" type="text" name="cnh" maxlength="11" required placeholder="cnh" style="width: 90px;"
                    oninput="this.value = this.value.replace(/\D/g, '').substring(0, 11);" />
                <div>
                    <label style="margin-left: 20px;">Validade da CNH: </label>
                    <input type="date" name="dataValidadeCNH" required style="width: 110px;" />
                </div>
            </div>
            <div>
                <label>Categoria:</label>
                <select class="categoria" name="categoria" required style="width: 110px;">
                    <option value="">Selecione</option>
                    <option>AB</option>
                    <option>AC</option>
                    <option>AD</option>
                    <option>AE</option>
                    <option>B</option>
                    <option>C</option>
                    <option>D</option>
                    <option>E</option>
                </select>
            </div>
            <label style="margin-top: 50px">Comprovante de Resid√™ncia:</label>
            <div class="custom-file-upload">
                <input type="file" id="comprovanteResidencia" name="comprovanteResidencia" style="display: none" />
                <button type="button" onclick="document.getElementById('comprovanteResidencia').click()">Selecionar
                    Arquivo</button>
                <span id="nomeArquivoComprovante">Nenhum arquivo escolhido</span>
            </div>

            <h3 style="margin-top: 50px">üìé Documentos Opcionais</h3>

            <label>Nada Consta:</label>
            <span style="color: red;">Obrigat√≥rio para o estado do Rio de Janeiro</span>
            <div class="custom-file-upload">
                <input type="file" id="nadaConstaArquivo" name="nadaConstaArquivo" style="display: none" />
                <button type="button" onclick="document.getElementById('nadaConstaArquivo').click()">Selecionar
                    Arquivo</button>
                <span id="nomeArquivoNadaConsta">Nenhum arquivo escolhido</span>
            </div>
            <label style="margin-top: 20px">Comprovante MEI (opcional):</label>
            <div class="custom-file-upload">
                <input class="mei" type="file" id="meiArquivo" name="meiArquivo" style="display: none; width: 100px;" />
                <button class="mei" type="button" onclick="document.getElementById('meiArquivo').click()">Selecionar
                    Arquivo</button>
                <span class="mei" id="nomeArquivoMEI">Nenhum arquivo escolhido</span>
            </div>
            <div class="form-grid">
                <div class="form-col">
                    <div class="form-item">
                        <label>Data de Nascimento: </label>
                        <input class="inputnascimento" type="date" name="dataNascimento" required
                            style="width: 100px;" />
                    </div>

                    <div class="form-item">
                        <label>Estado Civil: </label>
                        <select class="estadocivil" name="estadoCivil" required>
                            <option value="">Selecione</option>
                            <option>Casado(a)</option>
                            <option>Solteiro(a)</option>
                            <option>Separado(a)</option>
                            <option>Divorciado(a)</option>
                            <option>Vi√∫vo(a)</option>
                        </select>
                    </div>
                    <div>
                        <label>CPF: </label>
                        <input class="inputcpf" type="text" name="cpf" maxlength="14" required placeholder="cpf"
                            style="width: 100px;" oninput="mascaraCPF(this)" />
                    </div>
                    <div class="form-item">
                        <label>RG: </label>
                        <input class="inputrg" type="text" name="rg" maxlength="12" required placeholder="rg"
                            style="width: 100px;" oninput="mascaraRG(this)" />
                    </div>
                    <div class="form-item">
                        <label>Filhos: </label>
                        <input class="inputfilhos" type="number" name="filhos" required placeholder="filhos"
                            style="width: 50px;" oninput="this.value = this.value.slice(0, 2)" />
                    </div>
                </div>
            </div>

            <div>
                <label class="email">Email: </label>
                <input type="email" name="email" maxlength="80" required placeholder="e-mail"
                    style="margin-left: 31px; width: 397px;" />
            </div>
            <div class="">
                <label style="display: inline-block; width: 80px;">Endere√ßo: </label>
                <input type="text" name="endereco" maxlength="100" required placeholder="endere√ßo"
                    style="width: 397px;" />
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <label>Complemento: </label>
                <input type="text" name="complemento" maxlength="80" required placeholder="complemento"
                    style="margin-left: 5px; width: 364px;" />
            </div>
            <div>
                <label>Bairro: </label>
                <input type="text" name="bairro" maxlength="100" required placeholder="bairro"
                    style="margin-left: 23px; width: 402px;" />
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 0px;">
                <label>Munic√≠pio:</label>
                <input type="text" name="municipio" maxlength="100" required placeholder="munic√≠pio"
                    style="margin-left: 1px; width: 401px;" />
            </div>
            <div>
                <label>CEP:</label>
                <input type="text" name="cep" maxlength="10" required placeholder="cep"
                    style="margin-left: 36px; width: 80px;" oninput="mascaraCEP(this)" />
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <label>Banco:</label><input type="text" name="banco" maxlength="50" required placeholder="banco"
                    style="margin-left: 25px; width: 402px;" />
            </div>
            <div class="agencia">
                <label>Ag√™ncia: </label>
                <input type="text" name="agencia" maxlength="30" required placeholder="ag√™ncia" style="width: 100px;" />
                <label class="conta">Conta: </label>
                <input type="text" name="conta" maxlength="30" required placeholder="conta" style="width: 100px;" />
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <label>PIX:</label>
                <input type="text" name="pix" maxlength="50" required placeholder="pix"
                    style="margin-left: 40px; width: 412px;" />
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <label>Nome Familiar:</label>
                <input type="text" name="nomeFamiliar" maxlength="100" required placeholder="nome de um familiar"
                    style="margin-left: 5px; width: 362px;" />
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <label>Contato Familiar:</label>
                <input type="text" name="contatoFamiliar" maxlength="15" required placeholder="contato"
                    style="margin-left: 5px; width: 100px;" oninput="mascaraTelefone(this)" />
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <label>Indicado:</label>
                <input type="text" name="indicado" maxlength="100" required placeholder="indicado"
                    style="margin-left: 5px; width: 404px;" />
            </div>
            <div style="width: 400px;">
                <label>Se desejar, utilize o campo abaixo para deixar uma mensagem adicional ou
                    coment√°rio
                    relevante.
                </label><textarea name="observacao" maxlength="300" placeholder="Observa√ß√µes"
                    style="width: 480px;"></textarea>
            </div>
            <button type="submit" style="width: 200px;">Enviar</button>
            <button type="button" onclick="carregarFuncionarios()" style="width: 200px;">Ver Funcion√°rios
                Cadastrados</button>
            <div id="listaFuncionarios" style="margin-top: 30px;"></div>
        </form>
    </div>

    <script>
        function mascaraTelefone(input) {
            input.value = input.value
                .replace(/\D/g, '')
                .replace(/^(\d{2})(\d)/g, '($1)$2')
                .replace(/(\d{5})(\d)/, '$1-$2')
                .substring(0, 14);
        }

        function mascaraCEP(input) {
            input.value = input.value
                .replace(/\D/g, '')
                .replace(/(\d{2})(\d)/, '$1.$2')
                .replace(/(\d{3})(\d)/, '$1-$2')
                .substring(0, 10);
        }

        function mascaraCPF(input) {
            const valor = input.value.replace(/\D/g, '').substring(0, 11);
            input.value = valor
                .replace(/(\d{3})(\d)/, '$1.$2')
                .replace(/(\d{3})(\d)/, '$1.$2')
                .replace(/(\d{3})(\d{2})$/, '$1-$2');
        }

        function mascaraRG(input) {
            const valor = input.value.replace(/\D/g, '').substring(0, 9);
            input.value = valor
                .replace(/(\d{2})(\d)/, '$1.$2')
                .replace(/(\d{3})(\d)/, '$1.$2')
                .replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        }

        document.addEventListener("DOMContentLoaded", () => {
            const arquivosObrigatorios = [
                { id: 'cnhArquivo', nome: 'CNH (PDF ou imagem)' },
                { id: 'comprovanteResidencia', nome: 'Comprovante de Resid√™ncia' }
            ];

            const arquivosTodos = [
                { inputId: 'cnhArquivo', spanId: 'nomeArquivoCNH' },
                { inputId: 'comprovanteResidencia', spanId: 'nomeArquivoComprovante' },
                { inputId: 'nadaConstaArquivo', spanId: 'nomeArquivoNadaConsta' },
                { inputId: 'meiArquivo', spanId: 'nomeArquivoMEI' }
            ];

            arquivosTodos.forEach(({ inputId, spanId }) => {
                const input = document.getElementById(inputId);
                const span = document.getElementById(spanId);
                if (input && span) {
                    input.addEventListener("change", () => {
                        span.textContent = input.files.length > 0
                            ? input.files[0].name
                            : "Nenhum arquivo escolhido";
                    });
                }
            });

            document.getElementById('formFuncionario')?.addEventListener('submit', function (e) {
                const form = e.target;
                const campos = [
                    { nome: 'cnh', tamanho: 11, label: 'CNH' },
                    { nome: 'telefone', tamanho: 11, label: 'Telefone' },
                    { nome: 'cep', tamanho: 8, label: 'CEP' },
                    { nome: 'cpf', tamanho: 11, label: 'CPF' },
                    { nome: 'rg', tamanho: 9, label: 'RG' },
                    { nome: 'filhos', tamanho: 1, tipo: 'numero', max: 2, label: 'Filhos' },
                    { nome: 'contatoFamiliar', tamanho: 11, label: 'Contato Familiar' }
                ];

                for (const campo of campos) {
                    const el = form.elements[campo.nome];
                    if (!el) continue;

                    const valor = el.value.replace(/\D/g, '');
                    const isNumero = campo.tipo === 'numero';

                    if (isNumero) {
                        if (isNaN(valor) || valor.length > campo.max) {
                            alert(`${campo.label} deve conter no m√°ximo ${campo.max} d√≠gitos.`);
                            el.focus();
                            e.preventDefault();
                            return;
                        }
                    } else if (valor.length !== campo.tamanho) {
                        alert(`${campo.label} deve conter exatamente ${campo.tamanho} d√≠gitos.`);
                        el.focus();
                        e.preventDefault();
                        return;
                    }
                }
            });

            document.getElementById('formFuncionario').addEventListener('submit', function (e) {
                let erroEncontrado = false;
                arquivosObrigatorios.forEach(({ id, nome }) => {
                    const input = document.getElementById(id);
                    if (!input || !input.files.length) {
                        alert(`Por favor, envie o documento obrigat√≥rio: ${nome}.`);
                        erroEncontrado = true;
                    }
                });

                if (erroEncontrado) {
                    e.preventDefault();
                }
            });
        });

    </script>
    <script src="index.js"></script>
</body>

</html>
